import{g as w,u as y,j as e,B as u}from"./index-DM-Qiskf.js";import{r}from"./react-B361cgk5.js";import{L as d,F as j}from"./FormButton-3QKMHT7T.js";import"./icons-Co2hswYF.js";import"./seo-B3i9SC9Y.js";const L=()=>{const{token:l,updateToken:c}=w(i=>i),[t,p]=r.useState(""),[a,f]=r.useState(""),[x,o]=r.useState(!1),n=y(),h="https://api.homerevampexpert.com";r.useEffect(()=>{l&&n("/admin")},[n,l]);const g=async i=>{if(i.preventDefault(),!(!t||!a)){o(!0);try{const s=await fetch(`${h}/api/admin/login/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})});if(!s.ok)throw u.error("Error Login in!, Please try again"),new Error("Error Login in!, Please try again");const m=await s.json();sessionStorage.setItem("token",m.token),c(m.token),n("/admin"),o(!1)}catch(s){console.log(s),u.error(s),o(!1)}}};return e.jsx("div",{className:"w-screen h-screen flex justify-center items-center overflow-hidden",children:e.jsxs("div",{className:"max-w-[500px] mx-auto w-full",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Admin Login"}),e.jsxs("form",{className:"space-y-6 w-full mt-12",onSubmit:g,children:[e.jsx(d,{id:"userName",required:!0,placeholder:"Enter your username",value:t,setValue:p,label:"Username"}),e.jsx(d,{id:"password",type:"password",required:!0,placeholder:"Enter your password",value:a,setValue:f,label:"Password"}),e.jsx(j,{type:"submit",text:"Submit",className:"!mt-12",disabled:!t||!a,loading:x})]})]})})};export{L as default};
